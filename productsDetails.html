<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
        <title>欧德士</title>

        <!-- Bootstrap -->
        <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <link href="css/main_public.css" rel="stylesheet">
        <link href="css/main_reset.css" rel="stylesheet">
        <link href="css/main.css" rel="stylesheet">
        <!-- <link  href="css/layout.css" rel="stylesheet"> -->

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        <style>
            .play_box > div:first-child {
                margin-left: 0;
            }
            .play > div > div {
                width: auto;
                margin-right: 0;
                text-align: center;
            }
            .product-show { 
                display: inline-block;
            }
        </style>
    </head>
    <body>
            <!-- 顶部导航 -->
            <nav class="navbar navbar-default public-bg-white" role="navigation" >
                <div class="container-fluid">
                <div class="navbar-header" class="logo">
                    <a class="navbar-brand" href="index.html"><img src="images/img/logo.png" /></a>
                </div>
                <div>
                    <ul class="nav navbar-nav">
                        <li><a href="index.html">首页</a></li>
                        <li class="index-product-list active">
                            <a>产品</a>
                            <div>
                                <a href="massager.html">按摩器</a>
                                <a href="beauty.html">美容仪</a>
                            </div>
                        </li>
                        <li><a href="cooperation.html">代理合作</a></li>
                        <li><a href="#" class="scrollToBottom">关于我们</a></li>
                        <li><a href="news.html">资讯</a></li>
                    </ul>
                </div>
                </div>
            </nav>
            <div class="row">
                <div class="col-md-12 product-vadio">
                    <embed class="video"  name="cloudPlayer15003657998530" src="https://s.yuntv.letv.com/bclouds.swf" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" bgcolor="#000000" allowscriptaccess="always" wmode="direct" quality="high" allowfullscreen="true" version="10" flashvars="uu=82abd5491f&amp;vu=4633aef27a&amp;pu=098df6fe6d&amp;auto_play=0&amp;width=750&amp;height=422&amp;pageControls=1&amp;" width="100%" height="100%" align="middle">
                </div>
            </div>
            
            <div class="product-buy">
                <p>欧德士0D380按摩器</p>
                <button class="btn" style="height:26px;font-size:12px;line-height:1">立即购买</button>
            </div>
            <div class="product-details-content">
                <div>
                    <div>
                        <p>0D380按摩器是一款独特的仿章鱼造型设计，贴合人体曲线，小巧自如，携带方便。轻触式开关，震动按摩移动轻松自如，安静无噪音，震动效果可到达肌肉深层，可达到搓、揉、捏的按摩效果，适合任何场合使用。</p>
                        <p style="margin-bottom:30px">尺寸：约长98mmx宽98mmx高106mm</p>
                        <ul class="details-carousel">
                            
                        </ul>
                    </div>
                    <img class="imgPlay" src="">
                </div>
            </div>
            <div class="row short-line">
                <div><div></div></div>
            </div> 

            <div class="play public-bg-white">
                <div class="play_box">
                    <div>
                        <div class="public-bg-white">
                            <div class="product-show">
                                <div class="product-show-left">
                                    <img src="images/img/product-show1.png" style="margin-bottom:14px;" alt="0D380按摩器是一款独特的仿章鱼造型设计，贴合人体曲线，小巧自如，携带方便。轻触式开关，震动按摩移动轻松自如，安静无噪音，震动效果可到达肌肉深层，可达到搓、揉、捏的按摩效果，适合任何场合使用。111111"/>
                                    <img src="images/img/product-show2.png" alt="0D380按摩器是一款独特的仿章鱼造型设计，贴合人体曲线，小巧自如，携带方便。轻触式开关，震动按摩移动轻松自如，安静无噪音，震动效果可到达肌肉深层，可达到搓、揉、捏的按摩效果，适合任何场合使用。222222">
                                </div>
                                <div class="product-show-middle">
                                    <img src="images/img/product-show3.png" alt="0D380按摩器是一款独特的仿章鱼造型设计，贴合人体曲线，小巧自如，携带方便。轻触式开关，震动按摩移动轻松自如，安静无噪音，震动效果可到达肌肉深层，可达到搓、揉、捏的按摩效果，适合任何场合使用。333333">
                                </div>
                                <div class="product-show-right">
                                    <img src="images/img/product-show4.jpg" alt="0D380按摩器是一款独特的仿章鱼造型设计，贴合人体曲线，小巧自如，携带方便。轻触式开关，震动按摩移动轻松自如，安静无噪音，震动效果可到达肌肉深层，可达到搓、揉、捏的按摩效果，适合任何场合使用。444444">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="public-bg-white">
                            <div class="product-show">
                                <div class="product-show-left"><img src="images/img/product-show1.png" style="margin-bottom:14px;"><img src="images/img/product-show2.png"></div>
                                <div class="product-show-middle"><img src="images/img/product-show3.png"></div>
                                <div class="product-show-right"><img src="images/img/product-show4.jpg"></div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="public-bg-white">
                            <div class="product-show">
                                <div class="product-show-left"><img src="images/img/product-show1.png" style="margin-bottom:14px;"><img src="images/img/product-show2.png"></div>
                                <div class="product-show-middle"><img src="images/img/product-show3.png"></div>
                                <div class="product-show-right"><img src="images/img/product-show4.jpg"></div>
                            </div>
                        </div>
                    </div>
                </div>    
            </div>

            <div class="play_carousel public-bg-white">
                <ul>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </div>

            


            <div class="row public-bg-white">
                <div class="product-back">
                    <a href="allProducts.html"><button class="btn">返回列表</button></a>
                </div>
            </div>
            <div class="row public-footer">
                <div class="col-md-3 col-md-offset-3">
                    <h5>关于欧德士</h5>
                    <p class="mobile">+86755-83689690</p>
                    <p class="address">地址：深圳市龙岗区横岗街道四联社区排磅砖厂工业区4#厂房4搂</p>
                </div>
                <div class="col-md-2 ewm">
                    <p>手机店铺</p>
                    <img src="images/img/code.png" width="100"/>
                </div>
                <div class="col-md-3 shop">
                    <h4>欧德士商城</h4>
                    <p> > 欧德士健康旗舰店</p>
                </div>
            </div>

            <div class="scrollTop"><span class="glyphicon glyphicon-chevron-up"></span></div>


            <!-- dialog -->
            <div class="public-dialog">
                <div class="public-dialog-tab">
                   <!--  <div class="active"></div>
                    <div></div>
                    <div></div> -->
                </div>
                <div class="img-box">
                    <img src="images/img/product-show3.png">
                </div>
                <div class="img-title">
                    <div class="default-short-line"></div>
                    <p style="font-family:myFont">
                        
                    </p>
                </div>
            </div>


        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="lib/jquery/jquery.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script src="lib/bootstrap/js/bootstrap.min.js"></script>
        <script src="js/tools.js"></script>
        <script src="js/main.js"></script>

        <script>
            //获取窗口高度
            var window_height = $(window).height();
            $('.product-vadio').height(window_height-208);
            //实现滚动时动态改变购买栏样式
            $(window).scroll(function (){
                var st = $(this).scrollTop();
                if (st>window_height) {
                    $('.product-buy').css({
                        position:'fixed',
                        width:'100%',
                        top:'0',
                        height:'60px',
                        'padding-top':'18px',
                        'z-index':'1'
                    })
                    $('.product-buy p').css({
                        display:'inline-block',
                        'margin-right':'50%',
                        'font-size':'18px'
                    })
                    $('.product-buy .btn').css({
                        height:'24px',
                        'font-size':'14px',
                        'line-height':'.5'
                    })
                }else{
                    $('.product-buy').css({
                        position:'static',
                        height:'120px',
                        'padding-top':'20px',
                    })
                    $('.product-buy p').css({
                        display:'block',
                        'margin-right':'0',
                        'font-size':'26px'

                    })
                    $('.product-buy .btn').css({
                        height:'26px',
                        'font-size':'12px'
                    })
                }
            });

            var imgArr=[
                {'url':'images/img/product.png','carouselColor':'blue'},
                {'url':'images/img/product-black.png','carouselColor':'black'},
                {'url':'images/img/product-orange.png','carouselColor':'orange'},
                {'url':'images/img/product-pink.png','carouselColor':'pink'}
            ]
            //设置默认展示图片
            $('.imgPlay').attr('src',imgArr[0].url)
            //遍历添加切换按钮
            for (var i=0;i<imgArr.length;i++) {
                $('.details-carousel').append('<li><div class="'+imgArr[i].carouselColor+'"></div></li>');
            };
            //设置默认高亮
            $('.details-carousel li div').eq(0).addClass('carousel-active');
            //实现切换
            /*$('.details-carousel li div').click(function(){
                var current_index = $(this).parent().index();
                $('.details-carousel li div').removeClass('carousel-active');
                $(this).addClass('carousel-active');
                $('.imgPlay').attr('src',imgArr[current_index].url)
            })*/
            var i = 0;
            var timer = setInterval(function(){
                i++;
                if (i>3) i=0;
                $('.imgPlay').attr('src',imgArr[i].url)
                $('.details-carousel li div').removeClass('carousel-active')
                $('.details-carousel li div').eq(i).addClass('carousel-active');
            },3000)

            /**
             * 轮播
             */
            
            //获取每屏宽度
            var window_w = $(window).width();
            var per_width = $('.play_box > div').width(window_w);
            var total_length = $('.play_box > div').length*window_w;
            $('.play_box').width(total_length);

            var obj = $('.play_carousel ul li');
            obj.eq(0).addClass('play_active')
            obj.click(function(){
                //获取当前索引
                var current = $(this).index();
                //处理高亮
                obj.removeClass('play_active');
                $(this).addClass('play_active');

                $('.play_box').css({
                    transform:'translatex(' + (window_w)*current*(-1) + 'px)'
                })
            });


            // 隐藏弹出层
            $('.public-dialog').click(function() {
                toggleDialog($(this));
            });

            // 点击弹出层
            $('.play_box img').click(function(e){
                setDialogContent($(this).attr('src'), $(this).attr('alt'));
                dialogTabCount($(this));
                toggleDialog($('.public-dialog'));
                e.stopPropagation();
            });


            // 打开关闭弹出层
            function toggleDialog(obj) {
                if(obj.css('opacity') == 1){
                    obj.animate({opacity:"0"},function(){
                        obj.css('z-index','-1');
                        $('body').css('overflow-y','auto');
                    });
                } else {
                    $('body').css('overflow-y','hidden');
                    obj.css('z-index','2');
                    obj.animate({opacity:"1"});
                } 
            }

            function  dialogTabCount(obj) {
                var imgBox = obj.parent().parent().find('img');
                var imgDivIndex = obj.parent().parent().find('img').index(obj)
                var htmlDiv = ''
                for (var i=0; i<imgBox.length; i++) {
                    htmlDiv += '<div></div>'
                }
                $('.public-dialog-tab').html(htmlDiv);
                $('.public-dialog-tab div').eq(imgDivIndex).addClass('active');

                $('.public-dialog-tab div').click(function(e) {
                    // 当前点击选项卡对应图片组的位置
                    var tabsImgIndex = imgBox.eq($('.public-dialog-tab').find('div').index($(this)));
                    setDialogContent(tabsImgIndex.attr('src'), tabsImgIndex.attr('alt'));
                    // alert(imgBox.eq($('.public-dialog-tab').index($(this))).attr('src'));
                    console.log(imgBox.eq($('.public-dialog-tab').find('div').index($(this))));
                    $('.public-dialog-tab div').removeClass('active');
                    $(this).addClass('active');
                    e.stopPropagation();
                });
            }

            function setDialogContent (url, text) {
                $('.img-box img').attr('src', url);
                $('.img-title p').html(text);
            }
        </script>

    </body>
</html>